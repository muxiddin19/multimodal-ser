<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentimentogram Demo V2 - Word-Level Emotion</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            text-align: center;
            margin-bottom: 10px;
            color: #eee;
            font-size: 2em;
        }
        .subtitle-info {
            text-align: center;
            color: #888;
            margin-bottom: 20px;
            font-size: 0.9em;
        }
        .video-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin: 0 auto 30px;
            background: #000;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        video {
            width: 100%;
            display: block;
        }
        .subtitle-overlay {
            position: absolute;
            bottom: 70px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            padding: 12px 24px;
            border-radius: 8px;
            max-width: 85%;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(5px);
            transition: all 0.2s ease;
            font-size: 1.4em;
            line-height: 1.5;
        }
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        .control-group {
            background: rgba(22, 33, 62, 0.8);
            padding: 15px 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        .control-group label {
            display: block;
            margin-bottom: 8px;
            color: #888;
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        select {
            padding: 10px 20px;
            border-radius: 6px;
            border: 1px solid #333;
            background: #0f3460;
            color: #fff;
            cursor: pointer;
            font-size: 1em;
        }
        .emotion-legend {
            display: flex;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(22, 33, 62, 0.8);
            border-radius: 25px;
            font-size: 0.9em;
        }
        .legend-color {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            box-shadow: 0 0 10px currentColor;
        }
        .transcript {
            background: rgba(22, 33, 62, 0.8);
            border-radius: 12px;
            padding: 20px;
            max-height: 450px;
            overflow-y: auto;
            backdrop-filter: blur(10px);
        }
        .transcript h2 {
            margin-bottom: 15px;
            color: #aaa;
            font-size: 1.1em;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .transcript-entry {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 12px 15px;
            border-radius: 8px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .transcript-entry:hover {
            background: rgba(255,255,255,0.05);
        }
        .transcript-entry.active {
            background: rgba(255,255,255,0.1);
            border-left: 3px solid #FFD700;
        }
        .transcript-entry .time {
            color: #666;
            font-size: 0.85em;
            min-width: 45px;
            font-family: monospace;
        }
        .transcript-entry .text {
            flex: 1;
            line-height: 1.6;
        }
        .transcript-entry .emotion-tag {
            font-size: 0.7em;
            padding: 4px 10px;
            border-radius: 12px;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            white-space: nowrap;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.2);
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Sentimentogram Demo V2</h1>
        <p class="subtitle-info">Word-Level Emotion Visualization with Distinct Colors</p>

        <div class="controls">
            <div class="control-group">
                <label>Culture Setting</label>
                <select id="cultureSelect" onchange="updateStyles()">
                    <option value="western" selected>Western</option>
                    <option value="eastern" >Eastern</option>
                </select>
            </div>
            <div class="control-group">
                <label>Age Group</label>
                <select id="ageSelect" onchange="updateStyles()">
                    <option value="child">Child (1.3x)</option>
                    <option value="teen">Teen (1.1x)</option>
                    <option value="adult" selected>Adult (1.0x)</option>
                    <option value="senior">Senior (1.25x)</option>
                </select>
            </div>
        </div>

        <div class="emotion-legend">
            <div class="legend-item">
                <div class="legend-color" style="background:#FFD700;color:#FFD700"></div>
                <span>Happy/Excited</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background:#4A90D9;color:#4A90D9"></div>
                <span>Sadness</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background:#B8B8B8;color:#B8B8B8"></div>
                <span>Neutral</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background:#FF4444;color:#FF4444"></div>
                <span>Anger</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background:#FF8C00;color:#FF8C00"></div>
                <span>Frustration</span>
            </div>
        </div>

        <div class="video-container">
            <video id="video" controls>
                <source src="tedx1.mp4" type="video/mp4">
            </video>
            <div class="subtitle-overlay" id="subtitle"></div>
        </div>

        <div class="transcript">
            <h2>Transcript with Word-Level Emotions</h2>
            
            <div class="transcript-entry" id="entry-0" data-start="0.0" data-end="2.5">
                <span class="time">0:00</span>
                <span class="text"><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> Wow,</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> what</span><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> an</span><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> audience.</span></span>
                <span class="emotion-tag" style="background:#B8B8B8">neutral (60%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-1" data-start="3.2" data-end="5.68">
                <span class="time">0:03</span>
                <span class="text"><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> But</span><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> if</span><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> I'm</span><span style="color:#FF4444;font-size:1.35em;font-weight:bold;text-shadow:0 0 12px rgba(255,68,68,0.6)"> being</span><span style="color:#FF4444;font-size:1.35em;font-weight:bold;text-shadow:0 0 12px rgba(255,68,68,0.6)"> honest,</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> I</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> don't</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> care</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> what</span><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> you</span><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> think</span><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> of</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> my</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> talk.</span></span>
                <span class="emotion-tag" style="background:#B8B8B8">neutral (52%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-2" data-start="6.8" data-end="7.28">
                <span class="time">0:06</span>
                <span class="text"><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> I</span><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> don't.</span></span>
                <span class="emotion-tag" style="background:#FFD700">happy_excited (60%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-3" data-start="7.64" data-end="9.14">
                <span class="time">0:07</span>
                <span class="text"><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> I</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> care</span><span style="color:#FF4444;font-size:1.35em;font-weight:bold;text-shadow:0 0 12px rgba(255,68,68,0.6)"> what</span><span style="color:#FF4444;font-size:1.35em;font-weight:bold;text-shadow:0 0 12px rgba(255,68,68,0.6)"> the</span><span style="color:#FF4444;font-size:1.35em;font-weight:bold;text-shadow:0 0 12px rgba(255,68,68,0.6)"> internet</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> thinks</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> of</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> my</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> talk.</span></span>
                <span class="emotion-tag" style="background:#B8B8B8">neutral (61%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-4" data-start="10.28" data-end="12.62">
                <span class="time">0:10</span>
                <span class="text"><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> Because</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> they're</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> the</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> ones</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> who</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> get</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> it</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> seen</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> and</span><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> get</span><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> it</span><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> shared.</span></span>
                <span class="emotion-tag" style="background:#B8B8B8">neutral (42%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-5" data-start="13.2" data-end="14.78">
                <span class="time">0:13</span>
                <span class="text"><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> And</span><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> I</span><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> think</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> that's</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> where</span><span style="color:#FF4444;font-size:1.35em;font-weight:bold;text-shadow:0 0 12px rgba(255,68,68,0.6)"> most</span><span style="color:#FF4444;font-size:1.35em;font-weight:bold;text-shadow:0 0 12px rgba(255,68,68,0.6)"> people</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> get</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> it</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> wrong.</span></span>
                <span class="emotion-tag" style="background:#B8B8B8">neutral (62%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-6" data-start="15.16" data-end="16.68">
                <span class="time">0:15</span>
                <span class="text"><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> They're</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> talking</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> to</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> you</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> here.</span></span>
                <span class="emotion-tag" style="background:#B8B8B8">neutral (45%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-7" data-start="17.36" data-end="21.72">
                <span class="time">0:17</span>
                <span class="text"><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> Instead</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> of</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> talking</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> to</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> you,</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> random</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> person</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> scrolling</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> Facebook.</span></span>
                <span class="emotion-tag" style="background:#B8B8B8">neutral (63%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-8" data-start="22.9" data-end="23.7">
                <span class="time">0:22</span>
                <span class="text"><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> Thanks</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> for</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> the</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> click.</span></span>
                <span class="emotion-tag" style="background:#FFD700">happy_excited (51%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-9" data-start="24.64" data-end="28.22">
                <span class="time">0:24</span>
                <span class="text"><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> You</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> see,</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> back</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> in</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> 2009,</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> we</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> all</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> had</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> these</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> weird</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> little</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> things</span></span>
                <span class="emotion-tag" style="background:#B8B8B8">neutral (79%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-10" data-start="28.22" data-end="29.92">
                <span class="time">0:28</span>
                <span class="text"><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> called</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> attention</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> spans.</span></span>
                <span class="emotion-tag" style="background:#B8B8B8">neutral (79%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-11" data-start="30.8" data-end="31.84">
                <span class="time">0:30</span>
                <span class="text"><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> Yeah,</span><span style="color:#FF4444;font-size:1.35em;font-weight:bold;text-shadow:0 0 12px rgba(255,68,68,0.6)"> they're</span><span style="color:#FF4444;font-size:1.35em;font-weight:bold;text-shadow:0 0 12px rgba(255,68,68,0.6)"> gone.</span></span>
                <span class="emotion-tag" style="background:#B8B8B8">neutral (64%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-12" data-start="32.04" data-end="32.26">
                <span class="time">0:32</span>
                <span class="text"><span style="color:#FF4444;font-size:1.35em;font-weight:bold;text-shadow:0 0 12px rgba(255,68,68,0.6)"> They're</span><span style="color:#FF4444;font-size:1.35em;font-weight:bold;text-shadow:0 0 12px rgba(255,68,68,0.6)"> gone.</span></span>
                <span class="emotion-tag" style="background:#FF4444">anger (69%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-13" data-start="32.38" data-end="32.82">
                <span class="time">0:32</span>
                <span class="text"><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> We</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> killed</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> them.</span></span>
                <span class="emotion-tag" style="background:#FF8C00">frustration (39%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-14" data-start="33.24" data-end="33.88">
                <span class="time">0:33</span>
                <span class="text"><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> They're</span><span style="color:#FFD700;font-size:1.25em;font-weight:bold;text-shadow:0 0 10px rgba(255,215,0,0.5)"> dead.</span></span>
                <span class="emotion-tag" style="background:#FFD700">happy_excited (52%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-15" data-start="34.9" data-end="37.84">
                <span class="time">0:34</span>
                <span class="text"><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> I'm</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> trying</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> to</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> think</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> of</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> the</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> last</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> time</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> I</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> watched</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> an</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> 18</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none">-minute</span></span>
                <span class="emotion-tag" style="background:#B8B8B8">neutral (62%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-16" data-start="37.84" data-end="38.36">
                <span class="time">0:37</span>
                <span class="text"><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> TED</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> talk.</span></span>
                <span class="emotion-tag" style="background:#B8B8B8">neutral (60%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-17" data-start="38.86" data-end="40.78">
                <span class="time">0:38</span>
                <span class="text"><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> It's</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> been</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> years,</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> literally</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> years.</span></span>
                <span class="emotion-tag" style="background:#FFD700">happy_excited (56%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-18" data-start="41.52" data-end="44.04">
                <span class="time">0:41</span>
                <span class="text"><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> So</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> if</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> you're</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> given</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> a</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> TED</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> talk,</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> keep</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> it</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> quick.</span></span>
                <span class="emotion-tag" style="background:#B8B8B8">neutral (71%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-19" data-start="44.38" data-end="45.7">
                <span class="time">0:44</span>
                <span class="text"><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> I'm</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> doing</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> mine</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> in</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> under</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> a</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> minute.</span></span>
                <span class="emotion-tag" style="background:#FF8C00">frustration (43%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-20" data-start="46.32" data-end="47.82">
                <span class="time">0:46</span>
                <span class="text"><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> I'm</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> at</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> 44</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> seconds</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> right</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> now.</span></span>
                <span class="emotion-tag" style="background:#B8B8B8">neutral (53%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-21" data-start="47.88" data-end="49.54">
                <span class="time">0:47</span>
                <span class="text"><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> That</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> means</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> we've</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> got</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> time</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> for</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> one</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> final</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> joke.</span></span>
                <span class="emotion-tag" style="background:#B8B8B8">neutral (60%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-22" data-start="50.14" data-end="52.58">
                <span class="time">0:50</span>
                <span class="text"><span style="color:#FF4444;font-size:1.35em;font-weight:bold;text-shadow:0 0 12px rgba(255,68,68,0.6)"> Why</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> are</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> balloons</span><span style="color:#B8B8B8;font-size:1.0em;font-weight:normal;text-shadow:none"> so</span><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> expensive?</span></span>
                <span class="emotion-tag" style="background:#FF4444">anger (91%)</span>
            </div>
        

            <div class="transcript-entry" id="entry-23" data-start="54.54" data-end="55.02">
                <span class="time">0:54</span>
                <span class="text"><span style="color:#FF8C00;font-size:1.15em;font-weight:bold;text-shadow:0 0 8px rgba(255,140,0,0.4)"> Inflation.</span></span>
                <span class="emotion-tag" style="background:#FF8C00">frustration (42%)</span>
            </div>
        
        </div>
    </div>

    <script>
        const subtitles = [{"start": 0.0, "end": 2.5, "text": "Wow, what an audience.", "words": [{"word": " Wow,", "emotion": "neutral", "confidence": 0.3845585286617279}, {"word": " what", "emotion": "neutral", "confidence": 0.5600640773773193}, {"word": " an", "emotion": "happy_excited", "confidence": 0.4405139684677124}, {"word": " audience.", "emotion": "happy_excited", "confidence": 0.4405139684677124}], "dominant_emotion": "neutral"}, {"start": 3.2, "end": 5.68, "text": "But if I'm being honest, I don't care what you think of my talk.", "words": [{"word": " But", "emotion": "happy_excited", "confidence": 0.6082659363746643}, {"word": " if", "emotion": "happy_excited", "confidence": 0.6082659363746643}, {"word": " I'm", "emotion": "happy_excited", "confidence": 0.6082659363746643}, {"word": " being", "emotion": "anger", "confidence": 0.49988988041877747}, {"word": " honest,", "emotion": "anger", "confidence": 0.49988988041877747}, {"word": " I", "emotion": "neutral", "confidence": 0.5343224406242371}, {"word": " don't", "emotion": "neutral", "confidence": 0.5562885403633118}, {"word": " care", "emotion": "neutral", "confidence": 0.5562885403633118}, {"word": " what", "emotion": "neutral", "confidence": 0.5562885403633118}, {"word": " you", "emotion": "happy_excited", "confidence": 0.7153983116149902}, {"word": " think", "emotion": "happy_excited", "confidence": 0.7153983116149902}, {"word": " of", "emotion": "happy_excited", "confidence": 0.7153983116149902}, {"word": " my", "emotion": "neutral", "confidence": 0.7808586955070496}, {"word": " talk.", "emotion": "neutral", "confidence": 0.7808586955070496}], "dominant_emotion": "neutral"}, {"start": 6.8, "end": 7.28, "text": "I don't.", "words": [{"word": " I", "emotion": "happy_excited", "confidence": 0.5984026193618774}, {"word": " don't.", "emotion": "happy_excited", "confidence": 0.5984026193618774}], "dominant_emotion": "happy_excited"}, {"start": 7.64, "end": 9.14, "text": "I care what the internet thinks of my talk.", "words": [{"word": " I", "emotion": "neutral", "confidence": 0.5239253044128418}, {"word": " care", "emotion": "neutral", "confidence": 0.5239253044128418}, {"word": " what", "emotion": "anger", "confidence": 0.4613323509693146}, {"word": " the", "emotion": "anger", "confidence": 0.4613323509693146}, {"word": " internet", "emotion": "anger", "confidence": 0.4613323509693146}, {"word": " thinks", "emotion": "neutral", "confidence": 0.5121087431907654}, {"word": " of", "emotion": "neutral", "confidence": 0.4879252016544342}, {"word": " my", "emotion": "neutral", "confidence": 0.4879252016544342}, {"word": " talk.", "emotion": "neutral", "confidence": 0.4879252016544342}], "dominant_emotion": "neutral"}, {"start": 10.28, "end": 12.62, "text": "Because they're the ones who get it seen and get it shared.", "words": [{"word": " Because", "emotion": "neutral", "confidence": 0.46095162630081177}, {"word": " they're", "emotion": "neutral", "confidence": 0.42628568410873413}, {"word": " the", "emotion": "neutral", "confidence": 0.42628568410873413}, {"word": " ones", "emotion": "neutral", "confidence": 0.42628568410873413}, {"word": " who", "emotion": "neutral", "confidence": 0.660807192325592}, {"word": " get", "emotion": "neutral", "confidence": 0.660807192325592}, {"word": " it", "emotion": "neutral", "confidence": 0.660807192325592}, {"word": " seen", "emotion": "neutral", "confidence": 0.7104006409645081}, {"word": " and", "emotion": "neutral", "confidence": 0.7104006409645081}, {"word": " get", "emotion": "happy_excited", "confidence": 0.594809353351593}, {"word": " it", "emotion": "happy_excited", "confidence": 0.594809353351593}, {"word": " shared.", "emotion": "happy_excited", "confidence": 0.594809353351593}], "dominant_emotion": "neutral"}, {"start": 13.2, "end": 14.78, "text": "And I think that's where most people get it wrong.", "words": [{"word": " And", "emotion": "happy_excited", "confidence": 0.7875860333442688}, {"word": " I", "emotion": "happy_excited", "confidence": 0.7875860333442688}, {"word": " think", "emotion": "happy_excited", "confidence": 0.7875860333442688}, {"word": " that's", "emotion": "neutral", "confidence": 0.37645551562309265}, {"word": " where", "emotion": "neutral", "confidence": 0.37645551562309265}, {"word": " most", "emotion": "anger", "confidence": 0.629901647567749}, {"word": " people", "emotion": "anger", "confidence": 0.629901647567749}, {"word": " get", "emotion": "frustration", "confidence": 0.4667965769767761}, {"word": " it", "emotion": "frustration", "confidence": 0.4667965769767761}, {"word": " wrong.", "emotion": "frustration", "confidence": 0.4667965769767761}], "dominant_emotion": "neutral"}, {"start": 15.16, "end": 16.68, "text": "They're talking to you here.", "words": [{"word": " They're", "emotion": "frustration", "confidence": 0.36372649669647217}, {"word": " talking", "emotion": "frustration", "confidence": 0.36372649669647217}, {"word": " to", "emotion": "neutral", "confidence": 0.42885273694992065}, {"word": " you", "emotion": "neutral", "confidence": 0.42885273694992065}, {"word": " here.", "emotion": "neutral", "confidence": 0.6508368849754333}], "dominant_emotion": "neutral"}, {"start": 17.36, "end": 21.72, "text": "Instead of talking to you, random person scrolling Facebook.", "words": [{"word": " Instead", "emotion": "neutral", "confidence": 0.44851115345954895}, {"word": " of", "emotion": "neutral", "confidence": 0.44851115345954895}, {"word": " talking", "emotion": "frustration", "confidence": 0.3669895529747009}, {"word": " to", "emotion": "frustration", "confidence": 0.3669895529747009}, {"word": " you,", "emotion": "neutral", "confidence": 0.5763987898826599}, {"word": " random", "emotion": "neutral", "confidence": 0.5763987898826599}, {"word": " person", "emotion": "neutral", "confidence": 0.757448673248291}, {"word": " scrolling", "emotion": "neutral", "confidence": 0.6989348530769348}, {"word": " Facebook.", "emotion": "neutral", "confidence": 0.6617768406867981}], "dominant_emotion": "neutral"}, {"start": 22.9, "end": 23.7, "text": "Thanks for the click.", "words": [{"word": " Thanks", "emotion": "neutral", "confidence": 0.6665811538696289}, {"word": " for", "emotion": "neutral", "confidence": 0.7424688935279846}, {"word": " the", "emotion": "neutral", "confidence": 0.7424688935279846}, {"word": " click.", "emotion": "neutral", "confidence": 0.7424688935279846}], "dominant_emotion": "happy_excited"}, {"start": 24.64, "end": 28.22, "text": "You see, back in 2009, we all had these weird little things", "words": [{"word": " You", "emotion": "frustration", "confidence": 0.3997046649456024}, {"word": " see,", "emotion": "frustration", "confidence": 0.4333435893058777}, {"word": " back", "emotion": "frustration", "confidence": 0.4333435893058777}, {"word": " in", "emotion": "neutral", "confidence": 0.7518070340156555}, {"word": " 2009,", "emotion": "neutral", "confidence": 0.7518070340156555}, {"word": " we", "emotion": "neutral", "confidence": 0.41552120447158813}, {"word": " all", "emotion": "neutral", "confidence": 0.41552120447158813}, {"word": " had", "emotion": "neutral", "confidence": 0.41552120447158813}, {"word": " these", "emotion": "neutral", "confidence": 0.7071967124938965}, {"word": " weird", "emotion": "neutral", "confidence": 0.7071967124938965}, {"word": " little", "emotion": "neutral", "confidence": 0.7097553014755249}, {"word": " things", "emotion": "neutral", "confidence": 0.7097553014755249}], "dominant_emotion": "neutral"}, {"start": 28.22, "end": 29.92, "text": "called attention spans.", "words": [{"word": " called", "emotion": "neutral", "confidence": 0.5977195501327515}, {"word": " attention", "emotion": "neutral", "confidence": 0.48124998807907104}, {"word": " spans.", "emotion": "neutral", "confidence": 0.64423668384552}], "dominant_emotion": "neutral"}, {"start": 30.8, "end": 31.84, "text": "Yeah, they're gone.", "words": [{"word": " Yeah,", "emotion": "happy_excited", "confidence": 0.3732120990753174}, {"word": " they're", "emotion": "anger", "confidence": 0.4912475347518921}, {"word": " gone.", "emotion": "anger", "confidence": 0.4912475347518921}], "dominant_emotion": "neutral"}, {"start": 32.04, "end": 32.26, "text": "They're gone.", "words": [{"word": " They're", "emotion": "anger", "confidence": 0.6920392513275146}, {"word": " gone.", "emotion": "anger", "confidence": 0.6920392513275146}], "dominant_emotion": "anger"}, {"start": 32.38, "end": 32.82, "text": "We killed them.", "words": [{"word": " We", "emotion": "frustration", "confidence": 0.39012712240219116}, {"word": " killed", "emotion": "frustration", "confidence": 0.39012712240219116}, {"word": " them.", "emotion": "frustration", "confidence": 0.39012712240219116}], "dominant_emotion": "frustration"}, {"start": 33.24, "end": 33.88, "text": "They're dead.", "words": [{"word": " They're", "emotion": "happy_excited", "confidence": 0.3729359805583954}, {"word": " dead.", "emotion": "happy_excited", "confidence": 0.5558817386627197}], "dominant_emotion": "happy_excited"}, {"start": 34.9, "end": 37.84, "text": "I'm trying to think of the last time I watched an 18-minute", "words": [{"word": " I'm", "emotion": "frustration", "confidence": 0.35842466354370117}, {"word": " trying", "emotion": "neutral", "confidence": 0.3515111804008484}, {"word": " to", "emotion": "neutral", "confidence": 0.3515111804008484}, {"word": " think", "emotion": "neutral", "confidence": 0.3515111804008484}, {"word": " of", "emotion": "neutral", "confidence": 0.5152790546417236}, {"word": " the", "emotion": "neutral", "confidence": 0.5152790546417236}, {"word": " last", "emotion": "neutral", "confidence": 0.5152790546417236}, {"word": " time", "emotion": "neutral", "confidence": 0.698418915271759}, {"word": " I", "emotion": "neutral", "confidence": 0.698418915271759}, {"word": " watched", "emotion": "frustration", "confidence": 0.3712649941444397}, {"word": " an", "emotion": "neutral", "confidence": 0.5072969794273376}, {"word": " 18", "emotion": "neutral", "confidence": 0.5072969794273376}, {"word": "-minute", "emotion": "neutral", "confidence": 0.7181229591369629}], "dominant_emotion": "neutral"}, {"start": 37.84, "end": 38.36, "text": "TED talk.", "words": [{"word": " TED", "emotion": "neutral", "confidence": 0.5994908213615417}, {"word": " talk.", "emotion": "neutral", "confidence": 0.5994908213615417}], "dominant_emotion": "neutral"}, {"start": 38.86, "end": 40.78, "text": "It's been years, literally years.", "words": [{"word": " It's", "emotion": "frustration", "confidence": 0.44027554988861084}, {"word": " been", "emotion": "frustration", "confidence": 0.44027554988861084}, {"word": " years,", "emotion": "frustration", "confidence": 0.44027554988861084}, {"word": " literally", "emotion": "frustration", "confidence": 0.43432313203811646}, {"word": " years.", "emotion": "neutral", "confidence": 0.5499423146247864}], "dominant_emotion": "happy_excited"}, {"start": 41.52, "end": 44.04, "text": "So if you're given a TED talk, keep it quick.", "words": [{"word": " So", "emotion": "neutral", "confidence": 0.35795527696609497}, {"word": " if", "emotion": "neutral", "confidence": 0.35795527696609497}, {"word": " you're", "emotion": "neutral", "confidence": 0.5562238097190857}, {"word": " given", "emotion": "neutral", "confidence": 0.5562238097190857}, {"word": " a", "emotion": "neutral", "confidence": 0.5562238097190857}, {"word": " TED", "emotion": "neutral", "confidence": 0.6428641676902771}, {"word": " talk,", "emotion": "neutral", "confidence": 0.6428641676902771}, {"word": " keep", "emotion": "frustration", "confidence": 0.4256869852542877}, {"word": " it", "emotion": "frustration", "confidence": 0.4256869852542877}, {"word": " quick.", "emotion": "neutral", "confidence": 0.6075083017349243}], "dominant_emotion": "neutral"}, {"start": 44.38, "end": 45.7, "text": "I'm doing mine in under a minute.", "words": [{"word": " I'm", "emotion": "frustration", "confidence": 0.4706535041332245}, {"word": " doing", "emotion": "frustration", "confidence": 0.4706535041332245}, {"word": " mine", "emotion": "neutral", "confidence": 0.7035408020019531}, {"word": " in", "emotion": "neutral", "confidence": 0.7035408020019531}, {"word": " under", "emotion": "neutral", "confidence": 0.7470906376838684}, {"word": " a", "emotion": "neutral", "confidence": 0.7470906376838684}, {"word": " minute.", "emotion": "frustration", "confidence": 0.38227251172065735}], "dominant_emotion": "frustration"}, {"start": 46.32, "end": 47.82, "text": "I'm at 44 seconds right now.", "words": [{"word": " I'm", "emotion": "frustration", "confidence": 0.36843234300613403}, {"word": " at", "emotion": "frustration", "confidence": 0.36843234300613403}, {"word": " 44", "emotion": "frustration", "confidence": 0.36843234300613403}, {"word": " seconds", "emotion": "neutral", "confidence": 0.4607684314250946}, {"word": " right", "emotion": "neutral", "confidence": 0.6390591263771057}, {"word": " now.", "emotion": "neutral", "confidence": 0.6390591263771057}], "dominant_emotion": "neutral"}, {"start": 47.88, "end": 49.54, "text": "That means we've got time for one final joke.", "words": [{"word": " That", "emotion": "neutral", "confidence": 0.37807515263557434}, {"word": " means", "emotion": "neutral", "confidence": 0.37807515263557434}, {"word": " we've", "emotion": "neutral", "confidence": 0.37807515263557434}, {"word": " got", "emotion": "neutral", "confidence": 0.5017653703689575}, {"word": " time", "emotion": "neutral", "confidence": 0.5017653703689575}, {"word": " for", "emotion": "neutral", "confidence": 0.6785881519317627}, {"word": " one", "emotion": "neutral", "confidence": 0.6785881519317627}, {"word": " final", "emotion": "neutral", "confidence": 0.6164301037788391}, {"word": " joke.", "emotion": "frustration", "confidence": 0.34853169322013855}], "dominant_emotion": "neutral"}, {"start": 50.14, "end": 52.58, "text": "Why are balloons so expensive?", "words": [{"word": " Why", "emotion": "anger", "confidence": 0.8583911061286926}, {"word": " are", "emotion": "frustration", "confidence": 0.4046417474746704}, {"word": " balloons", "emotion": "neutral", "confidence": 0.650602400302887}, {"word": " so", "emotion": "neutral", "confidence": 0.6846098899841309}, {"word": " expensive?", "emotion": "frustration", "confidence": 0.44413328170776367}], "dominant_emotion": "anger"}, {"start": 54.54, "end": 55.02, "text": "Inflation.", "words": [{"word": " Inflation.", "emotion": "frustration", "confidence": 0.4165742099285126}], "dominant_emotion": "frustration"}];
        const cultureStyles = {"western": {"happy_excited": {"color": "#FFD700", "fontSize": 1.25, "fontWeight": "bold", "background": "rgba(255,215,0,0.15)", "textShadow": "0 0 10px rgba(255,215,0,0.5)"}, "sadness": {"color": "#4A90D9", "fontSize": 0.9, "fontWeight": "normal", "background": "rgba(74,144,217,0.1)", "textShadow": "none"}, "neutral": {"color": "#B8B8B8", "fontSize": 1.0, "fontWeight": "normal", "background": "transparent", "textShadow": "none"}, "anger": {"color": "#FF4444", "fontSize": 1.35, "fontWeight": "bold", "background": "rgba(255,68,68,0.15)", "textShadow": "0 0 12px rgba(255,68,68,0.6)"}, "frustration": {"color": "#FF8C00", "fontSize": 1.15, "fontWeight": "bold", "background": "rgba(255,140,0,0.12)", "textShadow": "0 0 8px rgba(255,140,0,0.4)"}}, "eastern": {"happy_excited": {"color": "#FF3333", "fontSize": 1.25, "fontWeight": "bold", "background": "rgba(255,51,51,0.15)", "textShadow": "0 0 10px rgba(255,51,51,0.5)"}, "sadness": {"color": "#E8E8E8", "fontSize": 0.9, "fontWeight": "normal", "background": "rgba(200,200,200,0.2)", "textShadow": "none"}, "neutral": {"color": "#A0A0A0", "fontSize": 1.0, "fontWeight": "normal", "background": "transparent", "textShadow": "none"}, "anger": {"color": "#1A1A1A", "fontSize": 1.35, "fontWeight": "bold", "background": "rgba(0,0,0,0.3)", "textShadow": "0 0 5px rgba(255,255,255,0.3)"}, "frustration": {"color": "#8B4513", "fontSize": 1.15, "fontWeight": "bold", "background": "rgba(139,69,19,0.15)", "textShadow": "none"}}};
        const ageScales = {"child": 1.3, "teen": 1.1, "adult": 1.0, "senior": 1.25};
        const legendColors = {"happy_excited": "#FFD700", "sadness": "#4A90D9", "neutral": "#B8B8B8", "anger": "#FF4444", "frustration": "#FF8C00"};

        const video = document.getElementById('video');
        const subtitleEl = document.getElementById('subtitle');

        video.addEventListener('timeupdate', function() {
            const currentTime = video.currentTime;
            let activeSubtitle = null;

            subtitles.forEach((sub, idx) => {
                const entry = document.getElementById(`entry-${idx}`);
                if (currentTime >= sub.start && currentTime <= sub.end) {
                    activeSubtitle = sub;
                    entry.classList.add('active');
                    entry.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                } else {
                    entry.classList.remove('active');
                }
            });

            if (activeSubtitle) {
                const culture = document.getElementById('cultureSelect').value;
                const age = document.getElementById('ageSelect').value;
                const scale = ageScales[age];
                const styles = cultureStyles[culture];

                if (activeSubtitle.words && activeSubtitle.words.length > 0) {
                    // Word-level styling
                    let html = '';
                    activeSubtitle.words.forEach(w => {
                        const style = styles[w.emotion] || styles['neutral'];
                        const size = style.fontSize * scale;
                        html += `<span style="color:${style.color};font-size:${size}em;font-weight:${style.fontWeight};text-shadow:${style.textShadow}">${w.word}</span>`;
                    });
                    subtitleEl.innerHTML = html;
                } else {
                    // Sentence-level fallback
                    const style = styles[activeSubtitle.dominant_emotion] || styles['neutral'];
                    const size = style.fontSize * scale;
                    subtitleEl.innerHTML = `<span style="color:${style.color};font-size:${size}em;font-weight:${style.fontWeight}">${activeSubtitle.text}</span>`;
                }
                subtitleEl.style.display = 'block';
            } else {
                subtitleEl.style.display = 'none';
            }
        });

        // Click on transcript entry to seek
        document.querySelectorAll('.transcript-entry').forEach(entry => {
            entry.addEventListener('click', () => {
                const start = parseFloat(entry.dataset.start);
                video.currentTime = start;
                video.play();
            });
        });

        function updateStyles() {
            const culture = document.getElementById('cultureSelect').value;
            const age = document.getElementById('ageSelect').value;
            const scale = ageScales[age];
            const styles = cultureStyles[culture];

            // Update transcript entries
            subtitles.forEach((sub, idx) => {
                const entry = document.getElementById(`entry-${idx}`);
                const textSpan = entry.querySelector('.text');

                if (sub.words && sub.words.length > 0) {
                    let html = '';
                    sub.words.forEach(w => {
                        const style = styles[w.emotion] || styles['neutral'];
                        const size = style.fontSize * scale;
                        html += `<span style="color:${style.color};font-size:${size}em;font-weight:${style.fontWeight};text-shadow:${style.textShadow}">${w.word}</span>`;
                    });
                    textSpan.innerHTML = html;
                } else {
                    const style = styles[sub.dominant_emotion] || styles['neutral'];
                    const size = style.fontSize * scale;
                    textSpan.innerHTML = `<span style="color:${style.color};font-size:${size}em;font-weight:${style.fontWeight}">${sub.text}</span>`;
                }
            });
        }
    </script>
</body>
</html>